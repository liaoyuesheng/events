{"version":3,"file":"events.esm.min.js","sources":["../src/index.ts"],"sourcesContent":["type Listener = (...args:any[]) => void\r\n\r\ntype Listeners = Listener[]\r\n\r\ninterface EventsObject {\r\n  [key: string]: Listeners\r\n}\r\n\r\nfunction checkListener(listener) {\r\n  const listenerType = typeof listener\r\n\r\n  if (listenerType !== 'function') {\r\n    throw new TypeError(`The \"listener\" argument must be of type Function. Received type ${listenerType}`)\r\n  }\r\n}\r\n\r\nexport default class Events {\r\n  private _events: EventsObject = {}\r\n\r\n  public on(eventName: string, listener: Listener, prepend = false): Events {\r\n    checkListener(listener)\r\n\r\n    if (!this._events[eventName]) {\r\n      this._events[eventName] = []\r\n    }\r\n\r\n    const listeners = this._events[eventName]\r\n\r\n    if (prepend) {\r\n      listeners.unshift(listener)\r\n    } else {\r\n      listeners.push(listener)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  public off(eventName: string, listener?: Listener): Events {\r\n    const listeners = this._events[eventName]\r\n\r\n    if (!listeners) return this\r\n\r\n    if (listener) {\r\n      checkListener(listener)\r\n\r\n      this._events[eventName] = listeners.filter((currentListener) => {\r\n        return currentListener !== listener\r\n      })\r\n    } else {\r\n      this._events[eventName] = []\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  public once(eventName: string, listener: Listener, prepend = false): Events {\r\n    checkListener(listener)\r\n\r\n    const proxyListener = (...args) => {\r\n      this.off(eventName, proxyListener)\r\n      listener.apply(this, args)\r\n    }\r\n\r\n    return this.on(eventName, proxyListener, prepend)\r\n  }\r\n\r\n  public emit(eventName: string, ...args: any[]): boolean {\r\n    const listeners = this._events[eventName]\r\n\r\n    if (!listeners || !listeners.length) {\r\n      return false\r\n    }\r\n\r\n    listeners.forEach((listener) => {\r\n      listener.apply(this, args)\r\n    })\r\n\r\n    return true\r\n  }\r\n}\r\n"],"names":["checkListener","listener","listenerType","TypeError","Events","constructor","this","on","eventName","prepend","_events","listeners","unshift","push","off","filter","currentListener","once","proxyListener","args","apply","emit","length","forEach"],"mappings":"AAQA,SAASA,EAAcC,GACrB,MAAMC,SAAsBD,EAE5B,GAAqB,aAAjBC,EACF,MAAM,IAAIC,UAAU,mEAAmED,WAItEE,EAArBC,cACUC,aAAwB,GAEzBC,GAAGC,EAAmBP,EAAoBQ,GAAU,GACzDT,EAAcC,GAETK,KAAKI,QAAQF,KAChBF,KAAKI,QAAQF,GAAa,IAG5B,MAAMG,EAAYL,KAAKI,QAAQF,GAQ/B,OANIC,EACFE,EAAUC,QAAQX,GAElBU,EAAUE,KAAKZ,GAGVK,KAGFQ,IAAIN,EAAmBP,GAC5B,MAAMU,EAAYL,KAAKI,QAAQF,GAE/B,OAAKG,GAEDV,GACFD,EAAcC,GAEdK,KAAKI,QAAQF,GAAaG,EAAUI,QAAQC,GACnCA,IAAoBf,KAG7BK,KAAKI,QAAQF,GAAa,GAGrBF,MAZgBA,KAelBW,KAAKT,EAAmBP,EAAoBQ,GAAU,GAC3DT,EAAcC,GAEd,MAAMiB,EAAgB,IAAIC,KACxBb,KAAKQ,IAAIN,EAAWU,GACpBjB,EAASmB,MAAMd,KAAMa,IAGvB,OAAOb,KAAKC,GAAGC,EAAWU,EAAeT,GAGpCY,KAAKb,KAAsBW,GAChC,MAAMR,EAAYL,KAAKI,QAAQF,GAE/B,SAAKG,IAAcA,EAAUW,UAI7BX,EAAUY,SAAStB,IACjBA,EAASmB,MAAMd,KAAMa,OAGhB"}